# =============================================================================
# Secrets Store CSI Driver - Helm Values
# =============================================================================
# This configures the Secrets Store CSI Driver for Kubernetes.
# The driver enables mounting secrets from external secret stores as volumes.
#
# Documentation: https://secrets-store-csi-driver.sigs.k8s.io/
# =============================================================================

# Sync secrets to Kubernetes Secrets
syncSecret:
  enabled: true

# Enable secret rotation
enableSecretRotation: true

# Rotation poll interval (how often to check for secret updates)
rotationPollInterval: 2m

# Install CRDs
installCRDs: true

# Linux node configuration
linux:
  enabled: true
  
  # Driver configuration
  driver:
    resources:
      requests:
        cpu: 50m
        memory: 100Mi
      limits:
        cpu: 200m
        memory: 200Mi
  
  # Registrar configuration
  registrarImage:
    repository: registry.k8s.io/sig-storage/csi-node-driver-registrar
    tag: v2.12.0
    pullPolicy: IfNotPresent
  
  # Liveness probe
  livenessProbeImage:
    repository: registry.k8s.io/sig-storage/livenessprobe
    tag: v2.14.0
    pullPolicy: IfNotPresent

# Provider health check
providerHealthCheck: true
providerHealthCheckInterval: 2m

# Metrics
metricsAddr: ":8080"

# RBAC
rbac:
  install: true
  pspEnabled: false

# Service account
serviceAccount:
  create: true
  name: secrets-store-csi-driver

# Log verbosity
logVerbosity: 0

# Tolerate all taints (for node coverage)
tolerations:
  - operator: Exists

# Node selector (optional - remove for all nodes)
# nodeSelector:
#   kubernetes.io/os: linux

# Pod labels
podLabels:
  app.kubernetes.io/component: secrets-store-csi-driver

# Pod annotations
podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "8080"
